<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="jquery-ui-month-picker/demo/MonthPicker.min.css" type="text/css" />
    <link rel="stylesheet" href="financeAid.css">
    <title>Expense</title>
  </head>
  <body>
    <div class="d-flex">
      <nav class="sidebar bg-dark" id="sidebar">
        <ul class="list-unstyled">
          <li><a class="navbar-brand text-center" href="financeAid.html">Finance Aid</a></li>
          <li>
            <a href="income.html" class="text-center d-block">
              <i class="fa fa-plus nav-item float-left"></i>
              <div class="text">
                <span class="d-none d-lg-block">Income</span>
                <span class="d-none d-lg-block" id="totalIncome">RM0.00</span>
              </div>
            </a>
          </li>
          <li>
            <a href="#" class="text-center d-block">
              <i class="fa fa-minus nav-item float-left"></i>
              <span class="d-none d-lg-block">Expense</span>
              <span class="d-none d-lg-block" id="totalExpense">RM0.00</span>                   
            </a>
          </li>
          <li>
            <a href="transfer.html" class="text-center d-block">
              <i class="fa fa-exchange-alt nav-item float-left middleicon"></i>
              <span class="d-none d-lg-inline align-middle">Transfer</span>
            </a>
          </li>
          <hr style="background-color: white;">
          <li>
            <a href="settings.html" class="text-center d-block">
              <i class="fa fa-cog nav-item float-left middleicon"></i>
              <span class="d-none d-lg-inline align-middle">Settings</span>
            </a>
          </li>
        </ul>
      </nav>

      <!-- Content in middle of web page --> 
      <div class="content p-1">
        <div class="d-flex justify-content-between">
          <!--Button to toggle side bar-->
          <a class="sidebar-toggle btn text-light"><i class="fa fa-bars" style="color:white;"></i>Menu</a>
          <ul class="pagination">
            <li class="page-item">
              <a class="page-link page-link-space" href="#" aria-label="Previous" id="previousMonth">
                <span aria-hidden="true" style="color: #4c4c4c; font-size: 30px;">&laquo;</span>
                <span class="sr-only">Previous</span>
              </a>
            </li>
            <li class="page-item"><a class="page-link" href="#" style="cursor: pointer;"><input type="month" id="monthPicker" readonly style="background:transparent; cursor: pointer;"></a></li>
            <li class="page-item">
              <a class="page-link page-link-space btn btn-primary disabled" href="#" aria-label="Next" id="nextMonth">
                <span aria-hidden="true" style="color: #4c4c4c; font-size: 30px;">&raquo;</span>
                <span class="sr-only">Next</span>
              </a>
            </li>
          </ul>
          <a class="sidebar-toggleright btn text-light float-right"><i class="fa fa-list-ul" style="color:white;"></i>Menu</a>     
        </div>      
      
        <div id="defaultView">
          <!-- Header -->
          <div class="container py-md-2">
            <div class="row">
              <div class="col-md-12 text-center">
                <p style="font-size:3rem; color: green;">Expense</p>
              </div>
            </div>
          </div>

          <!-- Canva for doughnut chart -->
          <div class="container py-md-2">
            <div class="row">
              <div class="col-md-12 text-center chart">
                <canvas id="myChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div id="filterApplied" class="d-flex justify-content-center" style="display: none !important">
          <div class="p-5">
            <h1>This graph cannot be displayed while filtering by accounts or categories is enabled.</h1>
          </div>
        </div>
      </div>

      <!-- Content of right side bar -->
      <div class="sidebar-right" id="sidebar-right">
        <div id="recordDetail">
          <div class="header-bar d-flex">
            <button id="exitRecord" class="btn px-2 py-1" style="background: #918f8f">
              <i class="fa fa-chevron-left" style="font-size: 30px"></i>
            </button>
            <span class="m-auto">Expense Detail</span>
          </div>

          <div class="dispExpenseAmount d-flex flex-column">
            <span class="mx-auto mt-5" id="recordDetailAmt" style="font-size: 50px">RM0.00</span>
            <p class="mx-auto mt-5" style="font-size: 20px">
              <span class="mr-4">
                <i class="fa fa-tag"></i>
                <span id="recordDetailCat">Category</span>
              </span>
              <span class="ml-4">
                <i class="fa fa-dollar-sign"></i>
                <span id="recordDetailAcc">Account</span>
              </span>
            </p>
            <p class="mx-auto mt-5" style="font-size: 20px">
              <span>
                <i class="fa fa-calendar-alt"></i>
                <span id="recordDetailDate">Date</span>
              </span>
            </p>
            <p class="mx-auto mt-5 d-none" style="font-size: 20px">
              <span>
                <span id="recordDetailKey">Key</span>
              </span>
            </p>
          </div>

          <div class="d-flex mt-5">
            <button type="button" class="btn btn-danger rounded-0 mx-auto px-5" data-toggle="modal" data-target="#deleteConfirm">
              Delete
            </button>
          </div>
        </div>
        <div id="filter-bar">
          <div class="d-flex px-2 justify-content-center">
            <a href="#" id="filter" class="text-center py-2" style="color: #4c4c4c; text-decoration: none; width: 70%">
              <i class="fa fa-filter"></i>
              <div id="filter-condition" class="d-inline" style="overflow: hidden"><span id="default-filter">Filter</span></div>
            </a>
          </div>
          <div id="filter-menu">
            <p class="d-block text-center mb-3" style="color: #918f8f;">Filter the data to display in lists</p>
            <div class="card mx-3">
              <div class="card-header">
                <a data-toggle="collapse" href="#collapse-account" aria-expanded="true" aria-controls="collapse-account" id="heading-account" class="d-block header-link">
                  Expense Account
                </a>
              </div>
              <div id="collapse-account" class="collapse show" aria-labelledby="heading-account">
                <div class="card-body">
                  <div class="d-flex justify-content-between">
                    <span>BANK</span>
                    <label class="switch mt-1">
                      <input type="checkbox" id="bankFilter">
                      <span class="slider"></span>
                    </label>
                  </div>
                  <div class="d-flex justify-content-between">
                    <span>CASH</span>
                    <label class="switch mt-1">
                      <input type="checkbox" id="cashFilter">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div class="card mx-3">
              <div class="card-header">
                <a data-toggle="collapse" href="#collapse-category" aria-expanded="true" aria-controls="collapse-category" id="heading-category" class="d-block header-link">
                  Expense Category
                </a>
              </div>
              <div id="collapse-category" class="collapse show" aria-labelledby="heading-category">
                <div class="card-body filter-btn-group">
                  <div class="btn-group btn-group-toggle d-flex m-0" data-toggle="buttons">
                    <button class="btn btn-secondary px-1 w-100 active" id="allCat">
                      <input type="radio" name="options" autocomplete="off" checked>
                        <span>All category</span>                
                    </button>
                    <button class="btn btn-secondary px-1 w-100" id="selectCat">
                      <input type="radio" name="options" autocomplete="off">
                        <span>Select Categories</span>
                    </button>
                  </div>
                  <div id="selectClass" class="mt-2" style="display: none;">
                    <div class="w-100 border border-dark" id="selectedCategory" style="height: 2.1rem"></div>
                    <div class="d-flex mt-1 m-0" id="categories-btn-group">
                      <button type="button" id="selectEnt" class="btn rounded-0 w-100 mr-1" style="background: #2d991f; color: white;">Entertainment</button>
                      <button type="button" id="selectFood" class="btn rounded-0 w-100 mr-1" style="background: #2d991f; color: white;">Foods and Drinks</button>
                      <button type="button" id="selectVeh" class="btn rounded-0 w-100" style="background: #2d991f; color: white;">Vehicle</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="scroll-area">
          <div class="summary mt-2 mx-0">
            <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons">
              <button class="btn btn-secondary w-100 active" id="sumByDate">
                <input type="radio" name="options" id="option1" autocomplete="off" checked>
                  <i class="fa fa-calendar-alt"></i>
                  <span>By date</span>                
              </button>
              <button class="btn btn-secondary w-100" id="sumByCat">
                <input type="radio" name="options" id="option2" autocomplete="off">
                  <i class="fa fa-tag"></i>
                  <span>By category</span>                
              </button>
            </div>
            <div class="d-flex justify-content-end mx-4 my-2">
              <a id="sorting" href="#" style="text-decoration: none; color: #4c4c4c;">
                <i class="fa fa-exchange-alt" style="transform: rotate(90deg);"></i>
                SORT
              </a>
            </div>
          </div>

          <ul class="list-group" id="expenseList">
            <!--Insert from database-->                           
          </ul>
        </div>
      </div>

      <!-- Modal for record details -->
      <div class="modal fade" id="deleteConfirm" tabindex="-1" role="dialog" aria-labelledby="deleteConfirmation" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Delete</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              Expense will be permanently deleted.
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" id="deleteExpBtn">Delete</button>
            </div>
          </div>
        </div>
      </div>
          
      <!--Button for adding records-->
      <button class="btn bg-dark mt-2" type="button" data-toggle="modal" data-target="#addRecord" id="addRecordBtn">
        <i class="fa fa-plus p-3" style="color: white; font-size: 50px;"></i>
      </button>
    
      <!-- Modal for adding records -->
      <div class="modal fade" id="addRecord" tabindex="-1" role="dialog" aria-labelledby="addRecord" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <select class="custom-select" id="selectFeature">
                <option value="exp" selected="selected">Add Expense</option>
                <option value="inc">Add Income</option>
                <option value="trf">Add Transfer</option>
              </select>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closeBtn">
                <span aria-hidden="true">&#10005;</span>
              </button>
            </div>
            <div class="modal-body" id="modal-body">
              <div id="amount-group">
                <label for="amount">Amount</label>
                <div class="input-group mb-3">
                  <input onkeyup="checkFormsValidity();" type="text" class="form-control" id="amount" placeholder="Amount" aria-label="amount" aria-describedby="amount" required="required">
                  <div class="input-group-append">
                    <span class="input-group-text">RM</span>
                  </div>
                </div>
              </div>
              <div id="account-group">
                <label for="account">Account</label>
                <div class="input-group mb-3">
                  <select name="" id="account">
                    <option value="">Choose an option:</option>
                    <option value="Bank">Bank</option>
                    <option value="Cash">Cash</option>
                  </select>
                </div>
              </div>
              <div id="category-group">
                <label for="category">Category</label>
                <div class="input-group mb-3">
                  <select name="" id="category">
                    <option value="">Choose an option:</option>
                    <option value="Foods and Drinks">Foods and Drinks</option>
                    <option value="Vehicle">Vehicle</option>
                    <option value="Entertainment">Entertainment</option>
                  </select>
                </div>
              </div>          
              <div id="trfFrom-group" style="display: none;">
                <label for="transferFrom">Transfer From</label>
                <div class="input-group mb-3">
                  <select name="" id="transferFrom">
                    <option value="" selected="selected">Choose an option:</option>
                    <option value="Bank">Bank</option>
                    <option value="Cash">Cash</option>
                  </select>
                </div>
              </div>
              <div id="trfTo-group"  style="display: none;">
                <label for="transferTo">Transfer To</label>
                <div class="input-group mb-3">
                  <input class="form-control" id="transferTo" readonly>
                </div>            
              </div>
              <div id="date-group">
                <label for="date">Date</label>
                <div class="input-group mb-3">
                  <input type="text" class="datepicker" id="datepicker"></p>
                </div>
              </div>
              <button type="button" data-dismiss="modal" class="btn btn-secondary btn-lg btn-block" id="saveBtn">Save</button>
            </div>
          </div>
        </div>
      </div>  
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-database.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
    <script src="jquery-ui-month-picker/demo/MonthPicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.min.js"></script>
    <script src="financeAid.js"></script>
    <script>
      //Initialise Datepicker
      $('.datepicker').datepicker({ maxDate: new Date() }).datepicker("setDate", new Date());
      
      //Initialise month picker
      $('#monthPicker').MonthPicker({ StartYear: new Date().getFullYear(), ShowIcon: false, MaxMonth: 0 });

      //Initialise month object for validate the increase and decrease selectedMonth
      var monthObj = {currentMonth: new Date().getMonth() + 1, currentYear: new Date().getFullYear()};

      //Display current month in Month Picker input field
      switch (monthObj.currentMonth) {
        case 1:
          $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
          break;
        case 2:
          $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
          break;
        case 3:
          $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
          break;
        case 4:
          $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
          break;
        case 5:
          $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
          break;
        case 6:
          $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
          break;
        case 7:
          $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
          break;
        case 8:
          $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
          break;
        case 9:
          $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
          break;
        case 10:
          $("#monthPicker").val(monthObj.currentYear + "-" + monthObj.currentMonth);
          break;
        case 11:
          $("#monthPicker").val(monthObj.currentYear + "-" + monthObj.currentMonth);
          break;
        case 12:
          $("#monthPicker").val(monthObj.currentYear + "-" + monthObj.currentMonth);
          break;
      }

      //Display the value return from month picker
      $('#monthPicker').MonthPicker({ 
        OnAfterChooseMonth: function( selectedDate ){
          var selectedMonth = $('#monthPicker').MonthPicker('GetSelectedDate');
          monthObj.currentMonth = selectedMonth.getMonth() + 1;
          monthObj.currentYear = selectedMonth.getFullYear();
          switch (monthObj.currentMonth) {
            case 1:
              $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
              break;
            case 2:
              $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
              break;
            case 3:
              $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
              break;
            case 4:
              $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
              break;
            case 5:
              $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
              break;
            case 6:
              $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
              break;
            case 7:
              $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
              break;
            case 8:
              $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
              break;
            case 9:
              $("#monthPicker").val(monthObj.currentYear + "-0" + monthObj.currentMonth);
              break;
            case 10:
              $("#monthPicker").val(monthObj.currentYear + "-" + monthObj.currentMonth);
              break;
            case 11:
              $("#monthPicker").val(monthObj.currentYear + "-" + monthObj.currentMonth);
              break;
            case 12:
              $("#monthPicker").val(monthObj.currentYear + "-" + monthObj.currentMonth);
              break;
          }

          var currentSelectedMonth = document.getElementById("monthPicker").value;

          //tempMonth use to get rid of leading zero of month
          var tempMonth = currentSelectedMonth.substr(-2);
          if (tempMonth.substr(0, 1) == 0) {
            monthObj.currentMonth = parseInt(tempMonth.substr(-1));
          } else {
            monthObj.currentMonth = parseInt(tempMonth);
          }   
          monthObj.currentYear = parseInt(currentSelectedMonth.substr(0, 4));
          var constCurrentMonth = new Date().getMonth() + 1;
          var constCurrentYear = new Date().getFullYear();

          //if not current year & month, enable next button
          if (monthObj.currentMonth == constCurrentMonth && monthObj.currentYear == constCurrentYear) {
            $("#nextMonth").addClass("disabled");
          } else {
            $("#nextMonth").removeClass("disabled");
          }

          //check filter before list out records
          var bankChecked = $("#bankFilter").attr('checked');
          var cashChecked = $("#cashFilter").attr('checked');

          //check whether sumByDate or sumByCat is selected
          if ($("#sumByDate").hasClass('active')) {
            /*default list*/
            if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            /*Only categories been selected*/
            //Entertainment & Food
            else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Entertainment & Vehicle
            else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Food & Vehicle
            else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //only Entertainment
            else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //only Foods
            else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //only Vehicle
            else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            /*Bank and categories selected*/
            //Bank + Entertainment & Food
            else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                    if (expAcc == "Bank") {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Bank + Entertainment & Vehicle
            else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Bank + Food & Vehicle
            else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Bank + Entertainment
            else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Bank + Foods
            else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Bank + Vehicle
            else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            /*Cash and categories selected*/
            //Cash + Entertainment & Food
            else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                    if (expAcc == "Cash") {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Cash + Entertainment & Vehicle
            else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Cash + Food & Vehicle
            else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Cash + Entertainment
            else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Cash + Foods
            else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            //Cash + Vehicle
            else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }
            /*Only account or categories been selected*/
            //only Bank
            else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });    
            }
            //only Cash
            else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
              var expenseObj;
              var cardObj = {};
              var dayArray = [];
              //index for each card item
              var i = 1;
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expDayinWeek = moment(expDate).format('ddd');
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardObj) {
                  if (cardObj.hasOwnProperty(key)) {
                    var cardHeaderDate = key;
                    var recordList = cardObj[key];
                    var cardText = '';
                    var x; //counter
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                      '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                    i += 1;
                  }
                }
              });
            }  
          }
          else {
            /*default list*/
            if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];          
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  }
                }
              });
            }
            /*Only categories been selected*/
            //Entertainment & Food
            else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];            
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Entertainment & Vehicle
            else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Food & Vehicle
            else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];          
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //only Entertainment
            else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //only Foods
            else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];          
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //only Vehicle
            else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            /*Bank and categories selected*/
            //Bank + Entertainment & Food
            else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayEntArray = [];
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                    }
    
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];          
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayFoodArray = [];
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                    }
    
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Bank + Entertainment & Vehicle
            else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayEntArray = [];
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                    }
    
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayVehArray = [];
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Bank + Food & Vehicle
            else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];        
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayFoodArray = [];
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayVehArray = [];
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Bank + Entertainment
            else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayEntArray = [];
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Bank + Foods
            else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];        
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayFoodArray = [];
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Bank + Vehicle
            else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayVehArray = [];
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            /*Cash and categories selected*/
            //Cash + Entertainment & Food
            else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayEntArray = [];
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];        
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayFoodArray = [];
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Cash + Entertainment & Vehicle
            else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayEntArray = [];
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                    }
    
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayVehArray = [];
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Cash + Food & Vehicle
            else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];        
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayFoodArray = [];
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayVehArray = [];
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Cash + Entertainment
            else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayEntArray = [];
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Cash + Foods
            else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];        
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayFoodArray = [];
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //Cash + Vehicle
            else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayVehArray = [];
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            /*Only account or categories been selected*/
            //only Bank
            else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayEntArray = [];
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];        
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayFoodArray = [];
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Bank") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayVehArray = [];
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }
            //only Cash
            else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
              $('#expenseList li').remove();
              var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var expenseObj;
              var cardEntObj = {};
              var dayEntArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayEntArray = [];
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayEntArray.push(expenseObj);
                        cardEntObj[position] = dayEntArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardEntObj) {
                  if (cardEntObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardEntObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 1;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var expenseObj;
              var cardFoodObj = {};
              var dayFoodArray = [];        
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayFoodArray = [];
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayFoodArray.push(expenseObj);
                        cardFoodObj[position] = dayFoodArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardFoodObj) {
                  if (cardFoodObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardFoodObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 2;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
              var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var expenseObj;
              var cardVehObj = {};
              var dayVehArray = [];
              expenseRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  expenseObj = childSnapshot.val();
                  var expDate = expenseObj.expenseDate;
                  var expAcc = expenseObj.expenseAccount;
                  var expCat = expenseObj.expenseCategory;
                  var expAmt = parseFloat(expenseObj.expenseAmount);
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = expDate.substr(0, 2);
                  var firebaseYear = expDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (expAcc == "Cash") {
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch category for position in array
                      var position = expCat;
                      //check if no empty array and records with same date, add into array and then object
                      if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                        dayVehArray = [];
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayVehArray.push(expenseObj);
                        cardVehObj[position] = dayVehArray;
                      }
                    }
                  }
                });
                //print out object for card items
                for (var key in cardVehObj) {
                  if (cardVehObj.hasOwnProperty(key)) {
                    var cardHeaderCat = key;
                    var recordList = cardVehObj[key];
                    var cardText = '';
                    var x; //counter
                    //index for each card item
                    var i = 3;
    
                    var dailyTotalHeader = 0;
                    for (x = 0; x < recordList.length; x++){
                      var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                      dailyTotalHeader += cardTextAmt;
                      cardText += '<a href="#" class="d-block mb-2 records">' +
                                    '<div class="d-flex justify-content-between">' + 
                                      '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                      '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                      '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                      '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                    '</div>' +
                                  '</a>';
                    }
    
                    $('#expenseList').append(
                    '<li class="list-group-item nopadding">' + 
                      '<div class="card">' + 
                        '<div class="card-header">' + 
                          '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                            '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                            '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                          '</a>' + 
                        '</div>' + 
                        '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                          '<div class="card-body">' + 
                            cardText +
                          '</div>' +
                        '</div>' + 
                      '</div>' +
                    '</li>');
                  }
                }
              });
            }  
          }

          //Update the total amount of income from database at navigation item
          var totalIncomeRef = firebase.database().ref('incomeObj');
          var totalIncomeObj;
          var totalIncome = 0;
          var currentSelectedMonth = document.getElementById("monthPicker").value;
          totalIncomeRef.on('value', function(snapshot){
            snapshot.forEach(function(childSnapshot){
              totalIncomeObj = childSnapshot.val();
              //compare month of record with current selected month
              var firebaseMonth = totalIncomeObj.incomeDate.substr(0, 2);
              var firebaseYear = totalIncomeObj.incomeDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                var incAmt = parseFloat(totalIncomeObj.incomeAmount);
                totalIncome += incAmt;
              }
            });
            document.getElementById("totalIncome").innerHTML = "RM" + totalIncome.toFixed(2);
          });

          //Update the total amount of expense from database at navigation item
          var totalExpenseRef = firebase.database().ref('expenseObj');
          var totalExpenseObj;
          var totalExpense = 0;
          var currentSelectedMonth = document.getElementById("monthPicker").value;
          totalExpenseRef.on('value', function(snapshot){
            snapshot.forEach(function(childSnapshot){
              totalExpenseObj = childSnapshot.val();
              //compare month of record with current selected month
              var firebaseMonth = totalExpenseObj.expenseDate.substr(0, 2);
              var firebaseYear = totalExpenseObj.expenseDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                var expAmt = parseFloat(totalExpenseObj.expenseAmount);
                totalExpense += expAmt;
              }
            });
            document.getElementById("totalExpense").innerHTML = "RM" + totalExpense.toFixed(2);
          });

          //update total amount for categories and assign to chart
          var entTotal = 0;
          var foodTotal = 0;
          var vehTotal = 0;
          function delay() {
            var totalAmt = [];
            // `delay` returns a promise
            return new Promise(function(resolve, reject) {
              // Only `delay` is able to resolve or reject the promise
              var entRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
              var entObj;
              entRef.once("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  entObj = childSnapshot.val();
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = entObj.expenseDate.substr(0, 2);
                  var firebaseYear = entObj.expenseDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    var entAmt = parseFloat(entObj.expenseAmount);
                    entTotal += entAmt;
                  }
                });
                totalAmt.push(entTotal);
              });
              var foodRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
              var foodObj;
              foodRef.once("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  foodObj = childSnapshot.val();
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = foodObj.expenseDate.substr(0, 2);
                  var firebaseYear = foodObj.expenseDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    var foodAmt = parseFloat(foodObj.expenseAmount);
                    foodTotal += foodAmt;
                  }
                });
                totalAmt.push(foodTotal);
              });
              var vehRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
              var vehObj;
              vehRef.once("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot){
                  vehObj = childSnapshot.val();
                  var currentSelectedMonth = document.getElementById("monthPicker").value;
                  //compare month of record with current selected month
                  var firebaseMonth = vehObj.expenseDate.substr(0, 2);
                  var firebaseYear = vehObj.expenseDate.substr(-4);
                  var validMonth = currentSelectedMonth.substr(-2);
                  var validYear = currentSelectedMonth.substr(0, 4);
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    var vehAmt = parseFloat(vehObj.expenseAmount);
                    vehTotal += vehAmt;
                  }
                });
                totalAmt.push(vehTotal);
                resolve(totalAmt);
              }); 
            });
          }

          delay()
            .then(function(v) { // `delay` returns a promise, 'v' is an array contain both bankTotal and cashTotal
              //remove existing chart before update
              $("#myChart").remove();
              $(".chart").append('<canvas id="myChart"></canvas>');

              //integrate chart.js
              var ctx = $("#myChart");
              var myChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                  labels: ["Entertainment", "Foods and Drinks", "Vehicle"],
                  datasets: [{
                    label: '# of Votes',
                    data: [entTotal, foodTotal, vehTotal],
                    backgroundColor: [
                      'rgba(0, 0, 139, 0.2)',
                      'rgba(178, 34, 34, 0.2)',
                      'rgba(255, 255, 0, 0.2)'
                    ],
                    borderColor: [
                      'rgba(0, 0, 139, 1)',
                      'rgba(178, 34, 34, 1)',
                      'rgba(255, 255, 0, 1)'
                    ],
                    borderWidth: 1
                  }]
                },
                options: {
                  responsive: true,
                  maintainAspectRatio: false,
                  tooltips: {
                    callbacks: {
                      title: function(tooltipItem, data) {
                        return data['labels'][tooltipItem[0]['index']];
                      },
                      label: function(tooltipItem, data) {
                        return "RM" + (data['datasets'][0]['data'][tooltipItem['index']]).toFixed(2);
                      },
                    }
                  },
                  elements: {
                    center: {
                      text: "RM" + parseFloat(entTotal + foodTotal + vehTotal).toFixed(2),
                      color: '#36A2EB', //Default black
                      fontStyle: 'Helvetica', //Default Arial
                      sidePadding: 15 //Default 20 (as a percentage)
                    }
                  },
                  scales: {
                    xAxes: [{
                      ticks: {
                        display: false,
                      },
                      gridLines: {
                        display: false,
                        drawBorder: false,
                      }
                    }],
                    yAxes: [{
                      ticks: {
                        display: false,
                    },  
                      gridLines: {
                        display: false,
                        drawBorder: false,
                      }
                    }]
                  }
                }
              });
            })
            .catch(function(v) {
              alert("Chart will not display if expense empty");
            });
        }
      });

      //Increase or decrease the current selected month
      $("#previousMonth").click(function(){
        document.getElementById("monthPicker").stepDown(1);
        var currentSelectedMonth = document.getElementById("monthPicker").value;
        
        //tempMonth use to get rid of leading zero of month
        var tempMonth = currentSelectedMonth.substr(-2);
        if (tempMonth.substr(0, 1) == 0) {
          monthObj.currentMonth = parseInt(tempMonth.substr(-1));
        } else {
          monthObj.currentMonth = parseInt(tempMonth);
        }   
        monthObj.currentYear = parseInt(currentSelectedMonth.substr(0, 4));
        var constCurrentMonth = new Date().getMonth() + 1;
        var constCurrentYear = new Date().getFullYear();

        //if not current year & month, enable next button
        if (monthObj.currentMonth == constCurrentMonth && monthObj.currentYear == constCurrentYear) {
          return true;
        } else {
          $("#nextMonth").removeClass("disabled");
        }

        //check filter before list out records
        var bankChecked = $("#bankFilter").attr('checked');
        var cashChecked = $("#cashFilter").attr('checked');

        //check whether sumByDate or sumByCat is selected
        if ($("#sumByDate").hasClass('active')) {
          /*default list*/
          if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Only categories been selected*/
          //Entertainment & Food
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Entertainment & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }                 
          //Food & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //only Entertainment
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //only Foods
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //only Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Bank and categories selected*/
          //Bank + Entertainment & Food
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                  if (expAcc == "Bank") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Entertainment & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Food & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Entertainment
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Foods
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Vehicle
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Cash and categories selected*/
          //Cash + Entertainment & Food
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                  if (expAcc == "Cash") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Entertainment & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Food & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Entertainment
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Foods
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Vehicle
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Only account or categories been selected*/
          //only Bank
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });    
          }
          //only Cash
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }  
        }
        else {
          /*default list*/
          if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Only categories been selected*/
          //Entertainment & Food
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];            
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Entertainment & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Food & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Entertainment
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Foods
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Bank and categories selected*/
          //Bank + Entertainment & Food
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
    
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Entertainment & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
    
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Food & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Entertainment
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Foods
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Vehicle
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Cash and categories selected*/
          //Cash + Entertainment & Food
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Entertainment & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
    
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Food & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Entertainment
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Foods
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Vehicle
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Only account or categories been selected*/
          //only Bank
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Cash
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }  
        }

        //Update the total amount of income from database at navigation item
        var totalIncomeRef = firebase.database().ref('incomeObj');
        var totalIncomeObj;
        var totalIncome = 0;
        var currentSelectedMonth = document.getElementById("monthPicker").value;
        totalIncomeRef.on('value', function(snapshot){
          snapshot.forEach(function(childSnapshot){
            totalIncomeObj = childSnapshot.val();
            //compare month of record with current selected month
            var firebaseMonth = totalIncomeObj.incomeDate.substr(0, 2);
            var firebaseYear = totalIncomeObj.incomeDate.substr(-4);
            var validMonth = currentSelectedMonth.substr(-2);
            var validYear = currentSelectedMonth.substr(0, 4);
            if (firebaseMonth == validMonth && firebaseYear == validYear) {
              var incAmt = parseFloat(totalIncomeObj.incomeAmount);
              totalIncome += incAmt;
            }
          });
          document.getElementById("totalIncome").innerHTML = "RM" + totalIncome.toFixed(2);
        });

        //Update the total amount of expense from database at navigation item
        var totalExpenseRef = firebase.database().ref('expenseObj');
        var totalExpenseObj;
        var totalExpense = 0;
        var currentSelectedMonth = document.getElementById("monthPicker").value;
        totalExpenseRef.on('value', function(snapshot){
          snapshot.forEach(function(childSnapshot){
            totalExpenseObj = childSnapshot.val();
            //compare month of record with current selected month
            var firebaseMonth = totalExpenseObj.expenseDate.substr(0, 2);
            var firebaseYear = totalExpenseObj.expenseDate.substr(-4);
            var validMonth = currentSelectedMonth.substr(-2);
            var validYear = currentSelectedMonth.substr(0, 4);
            if (firebaseMonth == validMonth && firebaseYear == validYear) {
              var expAmt = parseFloat(totalExpenseObj.expenseAmount);
              totalExpense += expAmt;
            }
          });
          document.getElementById("totalExpense").innerHTML = "RM" + totalExpense.toFixed(2);
        });

        //update total amount for categories and assign to chart
        var entTotal = 0;
        var foodTotal = 0;
        var vehTotal = 0;
        function delay() {
          var totalAmt = [];
          // `delay` returns a promise
          return new Promise(function(resolve, reject) {
            // Only `delay` is able to resolve or reject the promise
            var entRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var entObj;
            entRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                entObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = entObj.expenseDate.substr(0, 2);
                var firebaseYear = entObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var entAmt = parseFloat(entObj.expenseAmount);
                  entTotal += entAmt;
                }
              });
              totalAmt.push(entTotal);
            });
            var foodRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var foodObj;
            foodRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                foodObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = foodObj.expenseDate.substr(0, 2);
                var firebaseYear = foodObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var foodAmt = parseFloat(foodObj.expenseAmount);
                  foodTotal += foodAmt;
                }
              });
              totalAmt.push(foodTotal);
            });
            var vehRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var vehObj;
            vehRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                vehObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = vehObj.expenseDate.substr(0, 2);
                var firebaseYear = vehObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var vehAmt = parseFloat(vehObj.expenseAmount);
                  vehTotal += vehAmt;
                }
              });
              totalAmt.push(vehTotal);
              resolve(totalAmt);
            }); 
          });
        }

        delay()
          .then(function(v) { // `delay` returns a promise, 'v' is an array contain both bankTotal and cashTotal
            //remove existing chart before update
            $("#myChart").remove();
            $(".chart").append('<canvas id="myChart"></canvas>');

            //integrate chart.js
            var ctx = $("#myChart");
            var myChart = new Chart(ctx, {
              type: 'doughnut',
              data: {
                labels: ["Entertainment", "Foods and Drinks", "Vehicle"],
                datasets: [{
                  label: '# of Votes',
                  data: [entTotal, foodTotal, vehTotal],
                  backgroundColor: [
                    'rgba(0, 0, 139, 0.2)',
                    'rgba(178, 34, 34, 0.2)',
                    'rgba(255, 255, 0, 0.2)'
                  ],
                  borderColor: [
                    'rgba(0, 0, 139, 1)',
                    'rgba(178, 34, 34, 1)',
                    'rgba(255, 255, 0, 1)'
                  ],
                  borderWidth: 1
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                tooltips: {
                  callbacks: {
                    title: function(tooltipItem, data) {
                      return data['labels'][tooltipItem[0]['index']];
                    },
                    label: function(tooltipItem, data) {
                      return "RM" + (data['datasets'][0]['data'][tooltipItem['index']]).toFixed(2);
                    },
                  }
                },
                elements: {
                  center: {
                    text: "RM" + parseFloat(entTotal + foodTotal + vehTotal).toFixed(2),
                    color: '#36A2EB', //Default black
                    fontStyle: 'Helvetica', //Default Arial
                    sidePadding: 15 //Default 20 (as a percentage)
                  }
                },
                scales: {
                  xAxes: [{
                    ticks: {
                      display: false,
                    },
                    gridLines: {
                      display: false,
                      drawBorder: false,
                    }
                  }],
                  yAxes: [{
                    ticks: {
                      display: false,
                  },  
                    gridLines: {
                      display: false,
                      drawBorder: false,
                    }
                  }]
                }
              }
            });
          })
          .catch(function(v) {
            alert("Chart will not display if expense empty");
          });
      });

      $("#nextMonth").click(function(){        
        document.getElementById("monthPicker").stepUp(1);
        var currentSelectedMonth = document.getElementById("monthPicker").value;

        //tempMonth use to get rid of leading zero of month
        var tempMonth = currentSelectedMonth.substr(-2);
        if (tempMonth.substr(0, 1) == 0) {
          monthObj.currentMonth = parseInt(tempMonth.substr(-1));
        } else {
          monthObj.currentMonth = parseInt(tempMonth);
        }   
        monthObj.currentYear = parseInt(currentSelectedMonth.substr(0, 4));
        var constCurrentMonth = new Date().getMonth() + 1;
        var constCurrentYear = new Date().getFullYear();

        //if not current year & month, enable next button
        if (monthObj.currentMonth == constCurrentMonth && monthObj.currentYear == constCurrentYear) {
          $("#nextMonth").addClass("disabled");
        }

        //check filter before list out records
        var bankChecked = $("#bankFilter").attr('checked');
        var cashChecked = $("#cashFilter").attr('checked');

        //check whether sumByDate or sumByCat is selected
        if ($("#sumByDate").hasClass('active')) {
          /*default list*/
          if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Only categories been selected*/
          //Entertainment & Food
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Entertainment & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }                 
          //Food & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //only Entertainment
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //only Foods
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //only Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Bank and categories selected*/
          //Bank + Entertainment & Food
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                  if (expAcc == "Bank") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Entertainment & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Food & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Entertainment
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Foods
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Vehicle
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Cash and categories selected*/
          //Cash + Entertainment & Food
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                  if (expAcc == "Cash") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Entertainment & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Food & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Entertainment
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Foods
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Vehicle
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Only account or categories been selected*/
          //only Bank
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });    
          }
          //only Cash
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }  
        }
        else {
          /*default list*/
          if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Only categories been selected*/
          //Entertainment & Food
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];            
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Entertainment & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Food & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Entertainment
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Foods
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Bank and categories selected*/
          //Bank + Entertainment & Food
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }    
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Entertainment & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }    
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Food & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                        var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Entertainment
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Foods
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Vehicle
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Cash and categories selected*/
          //Cash + Entertainment & Food
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Entertainment & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Food & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Entertainment
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Foods
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Vehicle
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Only account or categories been selected*/
          //only Bank
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Cash
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
    
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
    
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }  
        }

        //Update the total amount of income from database at navigation item
        var totalIncomeRef = firebase.database().ref('incomeObj');
        var totalIncomeObj;
        var totalIncome = 0;
        var currentSelectedMonth = document.getElementById("monthPicker").value;
        totalIncomeRef.on('value', function(snapshot){
          snapshot.forEach(function(childSnapshot){
            totalIncomeObj = childSnapshot.val();
            //compare month of record with current selected month
            var firebaseMonth = totalIncomeObj.incomeDate.substr(0, 2);
            var firebaseYear = totalIncomeObj.incomeDate.substr(-4);
            var validMonth = currentSelectedMonth.substr(-2);
            var validYear = currentSelectedMonth.substr(0, 4);
            if (firebaseMonth == validMonth && firebaseYear == validYear) {
              var incAmt = parseFloat(totalIncomeObj.incomeAmount);
              totalIncome += incAmt;
            }
          });
          document.getElementById("totalIncome").innerHTML = "RM" + totalIncome.toFixed(2);
        });

        //Update the total amount of expense from database at navigation item
        var totalExpenseRef = firebase.database().ref('expenseObj');
        var totalExpenseObj;
        var totalExpense = 0;
        var currentSelectedMonth = document.getElementById("monthPicker").value;
        totalExpenseRef.on('value', function(snapshot){
          snapshot.forEach(function(childSnapshot){
            totalExpenseObj = childSnapshot.val();
            //compare month of record with current selected month
            var firebaseMonth = totalExpenseObj.expenseDate.substr(0, 2);
            var firebaseYear = totalExpenseObj.expenseDate.substr(-4);
            var validMonth = currentSelectedMonth.substr(-2);
            var validYear = currentSelectedMonth.substr(0, 4);
            if (firebaseMonth == validMonth && firebaseYear == validYear) {
              var expAmt = parseFloat(totalExpenseObj.expenseAmount);
              totalExpense += expAmt;
            }
          });
          document.getElementById("totalExpense").innerHTML = "RM" + totalExpense.toFixed(2);
        });

        //update total amount for categories and assign to chart
        var entTotal = 0;
        var foodTotal = 0;
        var vehTotal = 0;
        function delay() {
          var totalAmt = [];
          // `delay` returns a promise
          return new Promise(function(resolve, reject) {
            // Only `delay` is able to resolve or reject the promise
            var entRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var entObj;
            entRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                entObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = entObj.expenseDate.substr(0, 2);
                var firebaseYear = entObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var entAmt = parseFloat(entObj.expenseAmount);
                  entTotal += entAmt;
                }
              });
              totalAmt.push(entTotal);
            });
            var foodRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var foodObj;
            foodRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                foodObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = foodObj.expenseDate.substr(0, 2);
                var firebaseYear = foodObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var foodAmt = parseFloat(foodObj.expenseAmount);
                  foodTotal += foodAmt;
                }
              });
              totalAmt.push(foodTotal);
            });
            var vehRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var vehObj;
            vehRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                vehObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = vehObj.expenseDate.substr(0, 2);
                var firebaseYear = vehObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var vehAmt = parseFloat(vehObj.expenseAmount);
                  vehTotal += vehAmt;
                }
              });
              totalAmt.push(vehTotal);
              resolve(totalAmt);
            }); 
          });
        }

        delay()
          .then(function(v) { // `delay` returns a promise, 'v' is an array contain both bankTotal and cashTotal
            //remove existing chart before update
            $("#myChart").remove();
            $(".chart").append('<canvas id="myChart"></canvas>');

            //integrate chart.js
            var ctx = $("#myChart");
            var myChart = new Chart(ctx, {
              type: 'doughnut',
              data: {
                labels: ["Entertainment", "Foods and Drinks", "Vehicle"],
                datasets: [{
                  label: '# of Votes',
                  data: [entTotal, foodTotal, vehTotal],
                  backgroundColor: [
                    'rgba(0, 0, 139, 0.2)',
                    'rgba(178, 34, 34, 0.2)',
                    'rgba(255, 255, 0, 0.2)'
                  ],
                  borderColor: [
                    'rgba(0, 0, 139, 1)',
                    'rgba(178, 34, 34, 1)',
                    'rgba(255, 255, 0, 1)'
                  ],
                  borderWidth: 1
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                tooltips: {
                  callbacks: {
                    title: function(tooltipItem, data) {
                      return data['labels'][tooltipItem[0]['index']];
                    },
                    label: function(tooltipItem, data) {
                      return "RM" + (data['datasets'][0]['data'][tooltipItem['index']]).toFixed(2);
                    },
                  }
                },
                elements: {
                  center: {
                    text: "RM" + parseFloat(entTotal + foodTotal + vehTotal).toFixed(2),
                    color: '#36A2EB', //Default black
                    fontStyle: 'Helvetica', //Default Arial
                    sidePadding: 15 //Default 20 (as a percentage)
                  }
                },
                scales: {
                  xAxes: [{
                    ticks: {
                      display: false,
                    },
                    gridLines: {
                      display: false,
                      drawBorder: false,
                    }
                  }],
                  yAxes: [{
                    ticks: {
                      display: false,
                  },  
                    gridLines: {
                      display: false,
                      drawBorder: false,
                    }
                  }]
                }
              }
            });
          })
          .catch(function(v) {
            alert("Chart will not display if expense empty");
          });
      });
      
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAR3t7qI2D5wRu4fO38FuPYbPegZwQd_yI",
        authDomain: "finance-aid-b7793.firebaseapp.com",
        databaseURL: "https://finance-aid-b7793.firebaseio.com",
        projectId: "finance-aid-b7793",
        storageBucket: "finance-aid-b7793.appspot.com",
        messagingSenderId: "165519709635"
      };
      firebase.initializeApp(config);

      //output list of data when loading the page and only appear if there are available data
      var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
      var expenseObj;
      var cardObj = {};
      var dayArray = [];
      //index for each card item
      var i = 1;
      expenseRef.on("value", function(snapshot) {
        snapshot.forEach(function(childSnapshot){
          expenseObj = childSnapshot.val();
          var expDate = expenseObj.expenseDate;
          var expDayinWeek = moment(expDate).format('ddd');
          var expAcc = expenseObj.expenseAccount;
          var expCat = expenseObj.expenseCategory;
          var expAmt = parseFloat(expenseObj.expenseAmount);
          var currentSelectedMonth = document.getElementById("monthPicker").value;
          //compare month of record with current selected month
          var firebaseMonth = expDate.substr(0, 2);
          var firebaseYear = expDate.substr(-4);
          var validMonth = currentSelectedMonth.substr(-2);
          var validYear = currentSelectedMonth.substr(0, 4);
          if (firebaseMonth == validMonth && firebaseYear == validYear) {
            //fetch day of date for position in array
            var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
            //check if no empty array and records with same date, add into array and then object
            if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
              dayArray = [];
              dayArray.push(expenseObj);
              cardObj[position] = dayArray;
            }
            //initialise and add to card object if any single records in one day
            else {
              dayArray.push(expenseObj);
              cardObj[position] = dayArray;
            }
          }
        });
        //print out object for card items
        for (var key in cardObj) {
          if (cardObj.hasOwnProperty(key)) {
            var cardHeaderDate = key;
            var recordList = cardObj[key];
            var cardText = '';
            var x; //counter

            var dailyTotalHeader = 0;
            for (x = 0; x < recordList.length; x++){
              var cardTextAmt = parseFloat(recordList[x].expenseAmount);
              dailyTotalHeader += cardTextAmt;
              cardText += '<a href="#" class="d-block mb-2 records">' +
                            '<div class="d-flex justify-content-between">' + 
                              '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                              '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                              '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                              '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' + 
                            '</div>' +
                          '</a>';
            }

            $('#expenseList').append(
            '<li class="list-group-item nopadding">' + 
              '<div class="card">' + 
                '<div class="card-header">' + 
                  '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                    '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                    '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                  '</a>' + 
                '</div>' + 
                '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                  '<div class="card-body">' +
                    cardText +
                  '</div>' +
                '</div>' + 
              '</div>' +
            '</li>');
            i += 1;
          }
        }
      });

      //display expense records with filter
      $('#sumByDate').click(function(){
        //check filter before list out records
        var bankChecked = $("#bankFilter").attr('checked');
        var cashChecked = $("#cashFilter").attr('checked');

        /*default list*/
        if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch day of date for position in array
                var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                //check if no empty array and records with same date, add into array and then object
                if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                  dayArray = [];
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        /*Only categories been selected*/
        //Entertainment & Food
        else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                //fetch day of date for position in array
                var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                //check if no empty array and records with same date, add into array and then object
                if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                  dayArray = [];
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Entertainment & Vehicle
        else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                //fetch day of date for position in array
                var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                //check if no empty array and records with same date, add into array and then object
                if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                  dayArray = [];
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }                
        //Food & Vehicle
        else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
        $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                //fetch day of date for position in array
                var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                //check if no empty array and records with same date, add into array and then object
                if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                  dayArray = [];
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //only Entertainment
        else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                //fetch day of date for position in array
                var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                //check if no empty array and records with same date, add into array and then object
                if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                  dayArray = [];
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //only Foods
        else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                //fetch day of date for position in array
                var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                //check if no empty array and records with same date, add into array and then object
                if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                  dayArray = [];
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //only Vehicle
        else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                //fetch day of date for position in array
                var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                //check if no empty array and records with same date, add into array and then object
                if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                  dayArray = [];
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayArray.push(expenseObj);
                  cardObj[position] = dayArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        /*Bank and categories selected*/
        //Bank + Entertainment & Food
        else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                if (expAcc == "Bank") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Bank + Entertainment & Vehicle
        else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Bank + Food & Vehicle
        else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Bank + Entertainment
        else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Bank + Foods
        else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Bank + Vehicle
        else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        /*Cash and categories selected*/
        //Cash + Entertainment & Food
        else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                if (expAcc == "Cash") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Cash + Entertainment & Vehicle
        else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
  	      $('#expenseList li').remove();
  	      var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
  	      var expenseObj;
  	      var cardObj = {};
  	      var dayArray = [];
  	      //index for each card item
  	      var i = 1;
  	      expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              } 	              
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
  	      });
        }
        //Cash + Food & Vehicle
        else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Cash + Entertainment
        else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Cash + Foods
        else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        //Cash + Vehicle
        else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }
        /*Only account or categories been selected*/
        //only Bank
        else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });    
        }
        //only Cash
        else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
          var expenseObj;
          var cardObj = {};
          var dayArray = [];
          //index for each card item
          var i = 1;
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expDayinWeek = moment(expDate).format('ddd');
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardObj) {
              if (cardObj.hasOwnProperty(key)) {
                var cardHeaderDate = key;
                var recordList = cardObj[key];
                var cardText = '';
                var x; //counter

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                  '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
                i += 1;
              }
            }
          });
        }      
      });
      $('#sumByCat').click(function(){
        //check filter before list out records
        var bankChecked = $("#bankFilter").attr('checked');
        var cashChecked = $("#cashFilter").attr('checked');
        
        /*default list*/
        if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayEntArray = [];
                  dayEntArray.push(expenseObj);
                  cardEntObj[position] = dayEntArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayEntArray.push(expenseObj);
                  cardEntObj[position] = dayEntArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayFoodArray = [];
                  dayFoodArray.push(expenseObj);
                  cardFoodObj[position] = dayFoodArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayFoodArray.push(expenseObj);
                  cardFoodObj[position] = dayFoodArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayVehArray = [];
                  dayVehArray.push(expenseObj);
                  cardVehObj[position] = dayVehArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayVehArray.push(expenseObj);
                  cardVehObj[position] = dayVehArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        /*Only categories been selected*/
        //Entertainment & Food
        else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayEntArray = [];
                  dayEntArray.push(expenseObj);
                  cardEntObj[position] = dayEntArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayEntArray.push(expenseObj);
                  cardEntObj[position] = dayEntArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];          
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayFoodArray = [];
                  dayFoodArray.push(expenseObj);
                  cardFoodObj[position] = dayFoodArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayFoodArray.push(expenseObj);
                  cardFoodObj[position] = dayFoodArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Entertainment & Vehicle
        else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayEntArray = [];
                  dayEntArray.push(expenseObj);
                  cardEntObj[position] = dayEntArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayEntArray.push(expenseObj);
                  cardEntObj[position] = dayEntArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayVehArray = [];
                  dayVehArray.push(expenseObj);
                  cardVehObj[position] = dayVehArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayVehArray.push(expenseObj);
                  cardVehObj[position] = dayVehArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Food & Vehicle
        else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayFoodArray = [];
                  dayFoodArray.push(expenseObj);
                  cardFoodObj[position] = dayFoodArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayFoodArray.push(expenseObj);
                  cardFoodObj[position] = dayFoodArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayVehArray = [];
                  dayVehArray.push(expenseObj);
                  cardVehObj[position] = dayVehArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayVehArray.push(expenseObj);
                  cardVehObj[position] = dayVehArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //only Entertainment
        else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayEntArray = [];
                  dayEntArray.push(expenseObj);
                  cardEntObj[position] = dayEntArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayEntArray.push(expenseObj);
                  cardEntObj[position] = dayEntArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //only Foods
        else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayFoodArray = [];
                  dayFoodArray.push(expenseObj);
                  cardFoodObj[position] = dayFoodArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayFoodArray.push(expenseObj);
                  cardFoodObj[position] = dayFoodArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //only Vehicle
        else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                //fetch category for position in array
                var position = expCat;
                //check if no empty array and records with same date, add into array and then object
                if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                  dayVehArray = [];
                  dayVehArray.push(expenseObj);
                  cardVehObj[position] = dayVehArray;
                }
                //initialise and add to card object if any single records in one day
                else {
                  dayVehArray.push(expenseObj);
                  cardVehObj[position] = dayVehArray;
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        /*Bank and categories selected*/
        //Bank + Entertainment & Food
        else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }

              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }

              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Bank + Entertainment & Vehicle
        else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }

              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Bank + Food & Vehicle
        else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Bank + Entertainment
        else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Bank + Foods
        else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Bank + Vehicle
        else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        /*Cash and categories selected*/
        //Cash + Entertainment & Food
        else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Cash + Entertainment & Vehicle
        else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Cash + Food & Vehicle
        else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Cash + Entertainment
        else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Cash + Foods
        else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        //Cash + Vehicle
        else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
        }
        /*Only account or categories been selected*/
        //only Bank
        else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Bank") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });                  
        }
        //only Cash
        else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
          $('#expenseList li').remove();
          var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var expenseObj;
          var cardEntObj = {};
          var dayEntArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardEntObj) {
              if (cardEntObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardEntObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 1;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var expenseObj;
          var cardFoodObj = {};
          var dayFoodArray = [];        
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardFoodObj) {
              if (cardFoodObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardFoodObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 2;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });
          var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var expenseObj;
          var cardVehObj = {};
          var dayVehArray = [];
          expenseRef.on("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              expenseObj = childSnapshot.val();
              var expDate = expenseObj.expenseDate;
              var expAcc = expenseObj.expenseAccount;
              var expCat = expenseObj.expenseCategory;
              var expAmt = parseFloat(expenseObj.expenseAmount);
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = expDate.substr(0, 2);
              var firebaseYear = expDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (expAcc == "Cash") {
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              }
            });
            //print out object for card items
            for (var key in cardVehObj) {
              if (cardVehObj.hasOwnProperty(key)) {
                var cardHeaderCat = key;
                var recordList = cardVehObj[key];
                var cardText = '';
                var x; //counter
                //index for each card item
                var i = 3;

                var dailyTotalHeader = 0;
                for (x = 0; x < recordList.length; x++){
                  var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                  dailyTotalHeader += cardTextAmt;
                  cardText += '<a href="#" class="d-block mb-2 records">' +
                                '<div class="d-flex justify-content-between">' + 
                                  '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                  '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                  '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                  '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                '</div>' +
                              '</a>';
                }

                $('#expenseList').append(
                '<li class="list-group-item nopadding">' + 
                  '<div class="card">' + 
                    '<div class="card-header">' + 
                      '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                        '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                        '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                      '</a>' + 
                    '</div>' + 
                    '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                      '<div class="card-body">' + 
                        cardText +
                      '</div>' +
                    '</div>' + 
                  '</div>' +
                '</li>');
              }
            }
          });                    
        }
      });

      // Disable function
      jQuery.fn.extend({
        disable: function(state) {
          return this.each(function() {
            this.disabled = state;
          });
        }
      });

      //change disabled state if the input area are filled
      var saveButton = document.getElementById('saveBtn');
      saveButton.disabled = true;

      function checkFormsValidity(){
        var amountInput = document.getElementById('amount');
        if (amountInput.checkValidity()) {
          saveButton.disabled = false;
        } else {
          saveButton.disabled = true;
        }
      }

      //only enable number and decimal points to be input
      $('#amount').keypress(function(e) {
        var a = [];
        var k = e.which;

        var y = 46;
        a.push(y);

        for (i = 48; i < 58; i++)
          a.push(i);
    
        if (!(a.indexOf(k)>=0))
          e.preventDefault();    
      });

      //auto set transfer account when user selected
      var selectedAccount = $("#transferFrom option:selected");
      $('#transferFrom').change(function(){
        selectedAccount.each(function() {
          if (document.getElementById("transferFrom").value == "Bank"){
            document.getElementById("transferTo").value = "Cash";
          } else if (document.getElementById("transferFrom").value == "Cash"){
            document.getElementById("transferTo").value = "Bank";
          } else {
            document.getElementById("transferTo").value = "";
          }
        });
      });

      //switch modal body view by selection
      $("#selectFeature").change(function(){
        var selectedFeature = this.value;        
        if (selectedFeature == "inc") {
          $("#account-group").show(500);
          $("#category-group").hide(500);
          $("#trfFrom-group").hide(500);          
          $("#trfTo-group").hide(500);
        } else
        if (selectedFeature == "trf") {
          $("#account-group").hide(500);
          $("#category-group").hide(500);
          $("#trfFrom-group").show(500);          
          $("#trfTo-group").show(500);
        } else
        if (selectedFeature == "exp") {
          $("#account-group").show(500);
          $("#category-group").show(500);
          $("#trfFrom-group").hide(500);          
          $("#trfTo-group").hide(500);
        }
      });

      //Read the total amount of income from database at navigation item
      var totalIncomeRef = firebase.database().ref('incomeObj');
      var totalIncomeObj;
      var totalIncome = 0;
      var currentSelectedMonth = document.getElementById("monthPicker").value;
      totalIncomeRef.on('value', function(snapshot){
        snapshot.forEach(function(childSnapshot){
          totalIncomeObj = childSnapshot.val();
          //compare month of record with current selected month
          var firebaseMonth = totalIncomeObj.incomeDate.substr(0, 2);
          var firebaseYear = totalIncomeObj.incomeDate.substr(-4);
          var validMonth = currentSelectedMonth.substr(-2);
          var validYear = currentSelectedMonth.substr(0, 4);
          if (firebaseMonth == validMonth && firebaseYear == validYear) {
            var incAmt = parseFloat(totalIncomeObj.incomeAmount);
            totalIncome += incAmt;
          }
        });
        document.getElementById("totalIncome").innerHTML = "RM" + totalIncome.toFixed(2);
      });

      //Read the total amount of expense from database at navigation item
      var totalExpenseRef = firebase.database().ref('expenseObj');
      var totalExpenseObj;
      var totalExpense = 0;
      var currentSelectedMonth = document.getElementById("monthPicker").value;
      totalExpenseRef.on('value', function(snapshot){
        snapshot.forEach(function(childSnapshot){
          totalExpenseObj = childSnapshot.val();
          //compare month of record with current selected month
          var firebaseMonth = totalExpenseObj.expenseDate.substr(0, 2);
          var firebaseYear = totalExpenseObj.expenseDate.substr(-4);
          var validMonth = currentSelectedMonth.substr(-2);
          var validYear = currentSelectedMonth.substr(0, 4);
          if (firebaseMonth == validMonth && firebaseYear == validYear) {
            var expAmt = parseFloat(totalExpenseObj.expenseAmount);
            totalExpense += expAmt;
          }
        });
        document.getElementById("totalExpense").innerHTML = "RM" + totalExpense.toFixed(2);
      });

      //fetch current amount for both account
      var currentCashObj = {};
      var currentCashAmtRef = firebase.database().ref('currentCashAmt');
      currentCashAmtRef.on('value', function(snapshot){
        var childData = snapshot.val();
        currentCashObj.currentCash = parseFloat(childData.currentCash);
      });

      var currentBankObj = {};
      var currentBankAmtRef = firebase.database().ref('currentBankAmt');
      currentBankAmtRef.on('value', function(snapshot){
        var childData = snapshot.val();
        currentBankObj.currentBank = parseFloat(childData.currentBank);
      });
      
      //trigger when click on save button
      $("#saveBtn").click(function() {
        var validFeature = document.getElementById("selectFeature");
        var currentSelectedFeature = validFeature.options[validFeature.selectedIndex].value;
        
        if (currentSelectedFeature == "exp") {
          var expenseDateObj = $("#datepicker").datepicker("getDate");
          //return in MM-DD-YYYY
          var expDate = $.datepicker.formatDate("mm-dd-yy", expenseDateObj);
          var expAcc = document.getElementById("account").value;
          var expCat = document.getElementById("category").value;
          var expAmt = document.getElementById("amount").value;

          if (expAcc != "" && expCat != "") {
            //write records into list to firebase db
            var expenseObj = {};
            var expenseObjKey = expenseObjKey ? expenseObjKey : firebase.database().ref().child('expenseObj').push().key;
            expenseObj[expenseObjKey] = {expenseDate: expDate, expenseAccount: expAcc, expenseCategory: expCat, expenseAmount: expAmt, key: expenseObjKey};

            //calculate and update current amount based on expense
            var selectedAccount = expAcc;
            var currentexpenseAmt = parseFloat(expenseObj[expenseObjKey].expenseAmount);
            if (selectedAccount == "Bank") {
              var currentBankAmt = parseFloat(currentBankObj.currentBank);
              var validExpDiff = currentBankAmt - currentexpenseAmt;
              if (validExpDiff < 0) {
                alert("Your current account does not have sufficient money");
                $('.datepicker').datepicker("setDate", new Date());
                document.getElementById("account").value = '';
                document.getElementById("category").value = '';
                document.getElementById("amount").value = '';
              } else {
                firebase.database().ref('expenseCat').child(expCat).update(expenseObj);
                firebase.database().ref().child('expenseObj').update(expenseObj);
                currentBankAmt -= currentexpenseAmt;
                            
                //upload the current amount to firebase db
                currentBankObj.currentBank = currentBankAmt;
                firebase.database().ref().child('currentBankAmt').update(currentBankObj);

                //clear the input form after success alert
                alert("Your expense added successfully!");
                $('.datepicker').datepicker("setDate", new Date());
                document.getElementById("account").value = '';
                document.getElementById("category").value = '';
                document.getElementById("amount").value = '';
                $('#expenseList li').remove();
                
                //output list of data when loading the page and only appear if there are available data
                var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
                var expenseObj;
                var cardObj = {};
                var dayArray = [];
                //index for each card item
                var i = 1;
                expenseRef.on("value", function(snapshot) {
                  snapshot.forEach(function(childSnapshot){
                    expenseObj = childSnapshot.val();
                    var expDate = expenseObj.expenseDate;
                    var expDayinWeek = moment(expDate).format('ddd');
                    var expAcc = expenseObj.expenseAccount;
                    var expCat = expenseObj.expenseCategory;
                    var expAmt = parseFloat(expenseObj.expenseAmount);
                    var currentSelectedMonth = document.getElementById("monthPicker").value;
                    //compare month of record with current selected month
                    var firebaseMonth = expDate.substr(0, 2);
                    var firebaseYear = expDate.substr(-4);
                    var validMonth = currentSelectedMonth.substr(-2);
                    var validYear = currentSelectedMonth.substr(0, 4);
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  });
                  //print out object for card items
                  for (var key in cardObj) {
                    if (cardObj.hasOwnProperty(key)) {
                      var cardHeaderDate = key;
                      var recordList = cardObj[key];
                      var cardText = '';
                      var x; //counter

                      var dailyTotalHeader = 0;
                      for (x = 0; x < recordList.length; x++){
                        var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                        dailyTotalHeader += cardTextAmt;
                        cardText += '<a href="#" class="d-block mb-2 records">' +
                                      '<div class="d-flex justify-content-between">' + 
                                        '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                        '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                        '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                        '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                      '</div>' +
                                    '</a>';
                      }

                      $('#expenseList').append(
                      '<li class="list-group-item nopadding">' + 
                        '<div class="card">' + 
                          '<div class="card-header">' + 
                            '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                              '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                              '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                            '</a>' + 
                          '</div>' + 
                          '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                            '<div class="card-body">' + 
                              cardText +
                            '</div>' +
                          '</div>' + 
                        '</div>' +
                      '</li>');
                      i += 1;
                    }
                  }
                });
              }
            } 
            else if (selectedAccount == "Cash") {
              var currentCashAmt = parseFloat(currentCashObj.currentCash);
              var validExpDiff = currentCashAmt - currentexpenseAmt;
              if (validExpDiff < 0) {
                alert("Your current account does not have sufficient money");
                $('.datepicker').datepicker("setDate", new Date());
                document.getElementById("account").value = '';
                document.getElementById("category").value = '';
                document.getElementById("amount").value = '';
              } else {
                firebase.database().ref('expenseCat').child(expCat).update(expenseObj);
                firebase.database().ref().child('expenseObj').update(expenseObj);
                currentCashAmt -= currentexpenseAmt;

                //upload the current amount to firebase db
                currentCashObj.currentCash = currentCashAmt;
                firebase.database().ref().child('currentCashAmt').update(currentCashObj);
                        
                //clear the input form after success alert
                alert("Your expense added successfully!");
                $('.datepicker').datepicker("setDate", new Date());
                document.getElementById("account").value = '';
                document.getElementById("category").value = '';
                document.getElementById("amount").value = '';
                $('#expenseList li').remove();

                //output list of data when loading the page and only appear if there are available data
                var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
                var expenseObj;
                var cardObj = {};
                var dayArray = [];
                //index for each card item
                var i = 1;
                expenseRef.on("value", function(snapshot) {
                  snapshot.forEach(function(childSnapshot){
                    expenseObj = childSnapshot.val();
                    var expDate = expenseObj.expenseDate;
                    var expDayinWeek = moment(expDate).format('ddd');
                    var expAcc = expenseObj.expenseAccount;
                    var expCat = expenseObj.expenseCategory;
                    var expAmt = parseFloat(expenseObj.expenseAmount);
                    var currentSelectedMonth = document.getElementById("monthPicker").value;
                    //compare month of record with current selected month
                    var firebaseMonth = expDate.substr(0, 2);
                    var firebaseYear = expDate.substr(-4);
                    var validMonth = currentSelectedMonth.substr(-2);
                    var validYear = currentSelectedMonth.substr(0, 4);
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  });
                  //print out object for card items
                  for (var key in cardObj) {
                    if (cardObj.hasOwnProperty(key)) {
                      var cardHeaderDate = key;
                      var recordList = cardObj[key];
                      var cardText = '';
                      var x; //counter

                      var dailyTotalHeader = 0;
                      for (x = 0; x < recordList.length; x++){
                        var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                        dailyTotalHeader += cardTextAmt;
                        cardText += '<a href="#" class="d-block mb-2 records">' +
                                      '<div class="d-flex justify-content-between">' + 
                                        '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                        '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                        '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                        '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                      '</div>' +
                                    '</a>';
                      }

                      $('#expenseList').append(
                      '<li class="list-group-item nopadding">' + 
                        '<div class="card">' + 
                          '<div class="card-header">' + 
                            '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                              '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                              '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                            '</a>' + 
                          '</div>' + 
                          '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                            '<div class="card-body">' + 
                              cardText +
                            '</div>' +
                          '</div>' + 
                        '</div>' +
                      '</li>');
                      i += 1;
                    }
                  }
                });
              }                
            }
          } else {
            alert("Please ensure either Account or Category has been selected");
          }        
        } 
        else if (currentSelectedFeature == "inc") {
          var incomeDateObj = $("#datepicker").datepicker("getDate");
          //return in MM-DD-YYYY
          var incDate = $.datepicker.formatDate("mm-dd-yy", incomeDateObj);
          var incAcc = document.getElementById("account").value;
          var incAmt = document.getElementById("amount").value;

          var validIncAmt = document.getElementById("amount").value;
          if (incAcc != ""){
            //write records into list to firebase db
            var incomeObj = {}; //(if without var, override on same object, never update)
            var incomeObjKey = incomeObjKey ? incomeObjKey : firebase.database().ref().child('incomeObj').push().key;
            incomeObj[incomeObjKey] = {incomeDate: incDate,incomeAccount: incAcc, incomeAmount: incAmt, key: incomeObjKey};            
            firebase.database().ref().child('incomeObj').update(incomeObj);
            firebase.database().ref('incomeAcc').child(incAcc).update(incomeObj);
            
            //calculate and update current amount based on income
            var selectedAccount = document.getElementById('account').value;
            if (selectedAccount == "Bank"){
              var currentBankAmt = parseFloat(currentBankObj.currentBank);
              var currentIncomeAmt = parseFloat(incomeObj[incomeObjKey].incomeAmount);
              currentBankAmt += currentIncomeAmt;
                        
              //upload the current amount to firebase db
              currentBankObj.currentBank = currentBankAmt;
              firebase.database().ref().child('currentBankAmt').update(currentBankObj);
            }
            else if(selectedAccount == "Cash"){
              var currentCashAmt = parseFloat(currentCashObj.currentCash);
              var currentIncomeAmt = parseFloat(incomeObj[incomeObjKey].incomeAmount);
              currentCashAmt += currentIncomeAmt;

              //upload the current amount to firebase db
              currentCashObj.currentCash = currentCashAmt;
              firebase.database().ref().child('currentCashAmt').update(currentCashObj);
            }

            //clear the input form after success alert
            alert("Your income added successfully!");
            $('.datepicker').datepicker("setDate", new Date());
            document.getElementById("account").value = '';
            document.getElementById("amount").value = '';
            $('#expenseList li').remove();

            //output list of data when loading the page and only appear if there are available data
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter

                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }

                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
        } 
        else if (currentSelectedFeature == "trf") {
          var transferDateObj = $("#datepicker").datepicker("getDate");
          //return in MM-DD-YYYY
          var trfDate = $.datepicker.formatDate("mm-dd-yy", transferDateObj);
          var trfFrom = document.getElementById("transferFrom").value;
          var trfTo = document.getElementById("transferTo").value;
          var trfAmt = document.getElementById("amount").value;

          var validTrfAmt = document.getElementById("amount").value;
          if (trfFrom != "") {
            //write records into list to firebase db
            var transferObj = {}; //(override on same object, never update)
            var transferObjKey = transferObjKey ? transferObjKey : firebase.database().ref().child('transferObj').push().key;
            transferObj[transferObjKey] = {transferDate: trfDate, transferFrom: trfFrom, transferTo: trfTo, transferAmount: trfAmt, key: transferObjKey};

            //calculate and update current amount based on transfer
            var selectedAccountFrom = trfFrom;
            var currentTransferAmt = parseFloat(transferObj[transferObjKey].transferAmount);
            var currentBankAmt;
            var currentCashAmt;
            if (selectedAccountFrom == "Bank"){
              currentBankAmt = parseFloat(currentBankObj.currentBank);
              currentCashAmt = parseFloat(currentCashObj.currentCash);
              var validTrfDiff = currentBankAmt - currentTransferAmt;
                        
              if (validTrfDiff < 0) {
                alert("Your Bank account does not have sufficient money");
                $('.datepicker').datepicker("setDate", new Date());
                document.getElementById("transferFrom").value = '';
                document.getElementById("transferTo").value = '';
                document.getElementById("amount").value = '';
              } 
              else {
                firebase.database().ref('transferCat').child(trfFrom).update(transferObj);
                firebase.database().ref().child('transferObj').update(transferObj);
                currentBankAmt -= currentTransferAmt;
                currentCashAmt += currentTransferAmt;

                //upload the current amount to firebase db
                currentBankObj.currentBank = currentBankAmt;
                currentCashObj.currentCash = currentCashAmt;
                firebase.database().ref().child('currentBankAmt').update(currentBankObj);
                firebase.database().ref().child('currentCashAmt').update(currentCashObj);

                //clear the input form after success alert
                alert("Your transfer added successfully!");
                $('.datepicker').datepicker("setDate", new Date());
                document.getElementById("transferFrom").value = '';
                document.getElementById("transferTo").value = '';
                document.getElementById("amount").value = '';
                $('#expenseList li').remove();
                
                //output list of data when loading the page and only appear if there are available data
                var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
                var expenseObj;
                var cardObj = {};
                var dayArray = [];
                //index for each card item
                var i = 1;
                expenseRef.on("value", function(snapshot) {
                  snapshot.forEach(function(childSnapshot){
                    expenseObj = childSnapshot.val();
                    var expDate = expenseObj.expenseDate;
                    var expDayinWeek = moment(expDate).format('ddd');
                    var expAcc = expenseObj.expenseAccount;
                    var expCat = expenseObj.expenseCategory;
                    var expAmt = parseFloat(expenseObj.expenseAmount);
                    var currentSelectedMonth = document.getElementById("monthPicker").value;
                    //compare month of record with current selected month
                    var firebaseMonth = expDate.substr(0, 2);
                    var firebaseYear = expDate.substr(-4);
                    var validMonth = currentSelectedMonth.substr(-2);
                    var validYear = currentSelectedMonth.substr(0, 4);
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  });
                  //print out object for card items
                  for (var key in cardObj) {
                    if (cardObj.hasOwnProperty(key)) {
                      var cardHeaderDate = key;
                      var recordList = cardObj[key];
                      var cardText = '';
                      var x; //counter

                      var dailyTotalHeader = 0;
                      for (x = 0; x < recordList.length; x++){
                        var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                        dailyTotalHeader += cardTextAmt;
                        cardText += '<a href="#" class="d-block mb-2 records">' +
                                      '<div class="d-flex justify-content-between">' + 
                                        '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                        '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                        '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                        '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                      '</div>' +
                                    '</a>';
                      }

                      $('#expenseList').append(
                      '<li class="list-group-item nopadding">' + 
                        '<div class="card">' + 
                          '<div class="card-header">' + 
                            '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                              '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                              '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                            '</a>' + 
                          '</div>' + 
                          '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                            '<div class="card-body">' + 
                              cardText +
                            '</div>' +
                          '</div>' + 
                        '</div>' +
                      '</li>');
                      i += 1;
                    }
                  }
                });
              }                        
            } 
            else if(selectedAccountFrom == "Cash"){
              currentBankAmt = parseFloat(currentBankObj.currentBank);
              currentCashAmt = parseFloat(currentCashObj.currentCash);
              var validTrfDiff = currentCashAmt - currentTransferAmt;
                        
              if (validTrfDiff < 0) {
                alert("Your Cash account does not have sufficient money");
                $('.datepicker').datepicker("setDate", new Date());
                document.getElementById("transferFrom").value = '';
                document.getElementById("transferTo").value = '';
                document.getElementById("amount").value = '';
              } 
              else {
                firebase.database().ref('transferCat').child(trfFrom).update(transferObj);
                firebase.database().ref().child('transferObj').update(transferObj);
                currentBankAmt += currentTransferAmt;
                currentCashAmt -= currentTransferAmt;

                //upload the current amount to firebase db
                currentBankObj.currentBank = currentBankAmt;
                currentCashObj.currentCash = currentCashAmt;
                firebase.database().ref().child('currentBankAmt').update(currentBankObj);
                firebase.database().ref().child('currentCashAmt').update(currentCashObj);

                //clear the input form after success alert
                alert("Your transfer added successfully!");
                $('.datepicker').datepicker("setDate", new Date());
                document.getElementById("transferFrom").value = '';
                document.getElementById("transferTo").value = '';
                document.getElementById("amount").value = '';
                $('#expenseList li').remove();
                
                //output list of data when loading the page and only appear if there are available data
                var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
                var expenseObj;
                var cardObj = {};
                var dayArray = [];
                //index for each card item
                var i = 1;
                expenseRef.on("value", function(snapshot) {
                  snapshot.forEach(function(childSnapshot){
                    expenseObj = childSnapshot.val();
                    var expDate = expenseObj.expenseDate;
                    var expDayinWeek = moment(expDate).format('ddd');
                    var expAcc = expenseObj.expenseAccount;
                    var expCat = expenseObj.expenseCategory;
                    var expAmt = parseFloat(expenseObj.expenseAmount);
                    var currentSelectedMonth = document.getElementById("monthPicker").value;
                    //compare month of record with current selected month
                    var firebaseMonth = expDate.substr(0, 2);
                    var firebaseYear = expDate.substr(-4);
                    var validMonth = currentSelectedMonth.substr(-2);
                    var validYear = currentSelectedMonth.substr(0, 4);
                    if (firebaseMonth == validMonth && firebaseYear == validYear) {
                      //fetch day of date for position in array
                      var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                      //check if no empty array and records with same date, add into array and then object
                      if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                        dayArray = [];
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                      //initialise and add to card object if any single records in one day
                      else {
                        dayArray.push(expenseObj);
                        cardObj[position] = dayArray;
                      }
                    }
                  });
                  //print out object for card items
                  for (var key in cardObj) {
                    if (cardObj.hasOwnProperty(key)) {
                      var cardHeaderDate = key;
                      var recordList = cardObj[key];
                      var cardText = '';
                      var x; //counter

                      var dailyTotalHeader = 0;
                      for (x = 0; x < recordList.length; x++){
                        var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                        dailyTotalHeader += cardTextAmt;
                        cardText += '<a href="#" class="d-block mb-2 records">' +
                                      '<div class="d-flex justify-content-between">' + 
                                        '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                        '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                        '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                        '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                      '</div>' +
                                    '</a>';
                      }

                      $('#expenseList').append(
                      '<li class="list-group-item nopadding">' + 
                        '<div class="card">' + 
                          '<div class="card-header">' + 
                            '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                              '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                              '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                            '</a>' + 
                          '</div>' + 
                          '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                            '<div class="card-body">' + 
                              cardText +
                            '</div>' +
                          '</div>' + 
                        '</div>' +
                      '</li>');
                      i += 1;
                    }
                  }
                });
              }
            }
          }
        }

        //Update the total amount of income from database at navigation item
        var totalIncomeRef = firebase.database().ref('incomeObj');
        var totalIncomeObj;
        var totalIncome = 0;
        var currentSelectedMonth = document.getElementById("monthPicker").value;
        totalIncomeRef.on('value', function(snapshot){
          snapshot.forEach(function(childSnapshot){
            totalIncomeObj = childSnapshot.val();
            //compare month of record with current selected month
            var firebaseMonth = totalIncomeObj.incomeDate.substr(0, 2);
            var firebaseYear = totalIncomeObj.incomeDate.substr(-4);
            var validMonth = currentSelectedMonth.substr(-2);
            var validYear = currentSelectedMonth.substr(0, 4);
            if (firebaseMonth == validMonth && firebaseYear == validYear) {
              var incAmt = parseFloat(totalIncomeObj.incomeAmount);
              totalIncome += incAmt;
            }
          });
          document.getElementById("totalIncome").innerHTML = "RM" + totalIncome.toFixed(2);
        });

        //Update the total amount of expense from database at navigation item
        var totalExpenseRef = firebase.database().ref('expenseObj');
        var totalExpenseObj;
        var totalExpense = 0;
        var currentSelectedMonth = document.getElementById("monthPicker").value;
        totalExpenseRef.on('value', function(snapshot){
          snapshot.forEach(function(childSnapshot){
            totalExpenseObj = childSnapshot.val();
            //compare month of record with current selected month
            var firebaseMonth = totalExpenseObj.expenseDate.substr(0, 2);
            var firebaseYear = totalExpenseObj.expenseDate.substr(-4);
            var validMonth = currentSelectedMonth.substr(-2);
            var validYear = currentSelectedMonth.substr(0, 4);
            if (firebaseMonth == validMonth && firebaseYear == validYear) {
              var expAmt = parseFloat(totalExpenseObj.expenseAmount);
              totalExpense += expAmt;
            }
          });
          document.getElementById("totalExpense").innerHTML = "RM" + totalExpense.toFixed(2);
        });

        //update total amount for categories and assign to chart
        var entTotal = 0;
        var foodTotal = 0;
        var vehTotal = 0;
        function delay() {
          var totalAmt = [];
          // `delay` returns a promise
          return new Promise(function(resolve, reject) {
            // Only `delay` is able to resolve or reject the promise
            var entRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var entObj;
            entRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                entObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = entObj.expenseDate.substr(0, 2);
                var firebaseYear = entObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var entAmt = parseFloat(entObj.expenseAmount);
                  entTotal += entAmt;
                }
              });
              totalAmt.push(entTotal);
            });
            var foodRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var foodObj;
            foodRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                foodObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = foodObj.expenseDate.substr(0, 2);
                var firebaseYear = foodObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var foodAmt = parseFloat(foodObj.expenseAmount);
                  foodTotal += foodAmt;
                }
              });
              totalAmt.push(foodTotal);
            });
            var vehRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var vehObj;
            vehRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                vehObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = vehObj.expenseDate.substr(0, 2);
                var firebaseYear = vehObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var vehAmt = parseFloat(vehObj.expenseAmount);
                  vehTotal += vehAmt;
                }
              });
              totalAmt.push(vehTotal);
              resolve(totalAmt);
            }); 
          });
        }

        delay()
          .then(function(v) { // `delay` returns a promise, 'v' is an array contain both bankTotal and cashTotal
            //remove existing chart before update
            $("#myChart").remove();
            $(".chart").append('<canvas id="myChart"></canvas>');

            //integrate chart.js
            var ctx = $("#myChart");
            var myChart = new Chart(ctx, {
              type: 'doughnut',
              data: {
                labels: ["Entertainment", "Foods and Drinks", "Vehicle"],
                datasets: [{
                  label: '# of Votes',
                  data: [entTotal, foodTotal, vehTotal],
                  backgroundColor: [
                    'rgba(0, 0, 139, 0.2)',
                    'rgba(178, 34, 34, 0.2)',
                    'rgba(255, 255, 0, 0.2)'
                  ],
                  borderColor: [
                    'rgba(0, 0, 139, 1)',
                    'rgba(178, 34, 34, 1)',
                    'rgba(255, 255, 0, 1)'
                  ],
                  borderWidth: 1
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                tooltips: {
                  callbacks: {
                    title: function(tooltipItem, data) {
                      return data['labels'][tooltipItem[0]['index']];
                    },
                    label: function(tooltipItem, data) {
                      return "RM" + (data['datasets'][0]['data'][tooltipItem['index']]).toFixed(2);
                    },
                  }
                },
                elements: {
                  center: {
                    text: "RM" + parseFloat(entTotal + foodTotal + vehTotal).toFixed(2),
                    color: '#36A2EB', //Default black
                    fontStyle: 'Helvetica', //Default Arial
                    sidePadding: 15 //Default 20 (as a percentage)
                  }
                },
                scales: {
                  xAxes: [{
                    ticks: {
                      display: false,
                    },
                    gridLines: {
                      display: false,
                      drawBorder: false,
                    }
                  }],
                  yAxes: [{
                    ticks: {
                      display: false,
                  },  
                    gridLines: {
                      display: false,
                      drawBorder: false,
                    }
                  }]
                }
              }
            });
          })
          .catch(function(v) {
            alert("Chart will not display if expense empty");
          }); 

        //reset list for records
        $("#sumByDate").addClass('active');
        $("#sumByCat").removeClass('active');

        //reset modal dialog input area
        $("#selectFeature").prop('selectedIndex', 0);
        document.getElementById("amount").value = '';
        document.getElementById("account").value = '';
        document.getElementById("category").value = '';
        document.getElementById("transferFrom").value = '';
        $("#account-group").show(1000);
        $("#category-group").show(1000);
        $("#trfFrom-group").hide(1000);          
        $("#trfTo-group").hide(1000);
      });

      //plugin for text at center of chart
      Chart.pluginService.register({
        beforeDraw: function (chart) {
          if (chart.config.options.elements.center) {
            //Get ctx from string
            var ctx = chart.chart.ctx;

            //Get options from the center object in options
            var centerConfig = chart.config.options.elements.center;
            var fontStyle = centerConfig.fontStyle || 'Arial';
            var txt = centerConfig.text;
            var color = centerConfig.color || '#000';
            var sidePadding = centerConfig.sidePadding || 20;
            var sidePaddingCalculated = (sidePadding/100) * (chart.innerRadius * 2)
            //Start with a base font of 30px
            ctx.font = "30px " + fontStyle;

            //Get the width of the string and also the width of the element minus 10 to give it 5px side padding
            var stringWidth = ctx.measureText(txt).width;
            var elementWidth = (chart.innerRadius * 2) - sidePaddingCalculated;

            // Find out how much the font can grow in width.
            var widthRatio = elementWidth / stringWidth;
            var newFontSize = Math.floor(30 * widthRatio);
            var elementHeight = (chart.innerRadius * 2);

            // Pick a new font size so it will not be larger than the height of label.
            var fontSizeToUse = Math.min(newFontSize, elementHeight);

            //Set font settings to draw it correctly.
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            var centerX = ((chart.chartArea.left + chart.chartArea.right) / 2);
            var centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 2);
            ctx.font = fontSizeToUse+"px " + fontStyle;
            ctx.fillStyle = color;

            //Draw text in center
            ctx.fillText(txt, centerX, centerY);
          }
        }
      });


      //initalise and read total amount for categories and assign to chart
      var entTotal = 0;
      var foodTotal = 0;
      var vehTotal = 0;
      function delay() {
        var totalAmt = [];
        // `delay` returns a promise
        return new Promise(function(resolve, reject) {
          // Only `delay` is able to resolve or reject the promise
          var entRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
          var entObj;
          entRef.once("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              entObj = childSnapshot.val();
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = entObj.expenseDate.substr(0, 2);
              var firebaseYear = entObj.expenseDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                var entAmt = parseFloat(entObj.expenseAmount);
                entTotal += entAmt;
              }
            });
            totalAmt.push(entTotal);
          });
          var foodRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
          var foodObj;
          foodRef.once("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              foodObj = childSnapshot.val();
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = foodObj.expenseDate.substr(0, 2);
              var firebaseYear = foodObj.expenseDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                var foodAmt = parseFloat(foodObj.expenseAmount);
                foodTotal += foodAmt;
              }
            });
            totalAmt.push(foodTotal);
          });
          var vehRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
          var vehObj;
          vehRef.once("value", function(snapshot) {
            snapshot.forEach(function(childSnapshot){
              vehObj = childSnapshot.val();
              var currentSelectedMonth = document.getElementById("monthPicker").value;
              //compare month of record with current selected month
              var firebaseMonth = vehObj.expenseDate.substr(0, 2);
              var firebaseYear = vehObj.expenseDate.substr(-4);
              var validMonth = currentSelectedMonth.substr(-2);
              var validYear = currentSelectedMonth.substr(0, 4);
              if (firebaseMonth == validMonth && firebaseYear == validYear) {
                var vehAmt = parseFloat(vehObj.expenseAmount);
                vehTotal += vehAmt;
              }
            });
            totalAmt.push(vehTotal);
            resolve(totalAmt);
          });
        });
      }

      delay()
        .then(function(v) { // `delay` returns a promise, 'v' is an array contain total amount of all categories
          //integrate chart.js
          var ctx = $("#myChart");
          var myChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
              labels: ["Entertainment", "Foods and Drinks", "Vehicle"],
              datasets: [{
                label: '# of Votes',
                data: [entTotal, foodTotal, vehTotal],
                backgroundColor: [
                  'rgba(0, 0, 139, 0.2)',
                  'rgba(178, 34, 34, 0.2)',
                  'rgba(255, 255, 0, 0.2)'
                ],
                borderColor: [
                  'rgba(0, 0, 139, 1)',
                  'rgba(178, 34, 34, 1)',
                  'rgba(255, 255, 0, 1)'
                ],
                borderWidth: 1
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              tooltips: {
                callbacks: {
                  title: function(tooltipItem, data) {
                    return data['labels'][tooltipItem[0]['index']];
                  },
                  label: function(tooltipItem, data) {
                    return "RM" + (data['datasets'][0]['data'][tooltipItem['index']]).toFixed(2);
                  },
                }
              },
              elements: {
                center: {
                  text: "RM" + parseFloat(entTotal + foodTotal + vehTotal).toFixed(2),
                  color: '#36A2EB', //Default black
                  fontStyle: 'Helvetica', //Default Arial
                  sidePadding: 15 //Default 20 (as a percentage)
                }
              },
              scales: {
                xAxes: [{
                  ticks: {
                    display: false,
                  },
                  gridLines: {
                    display: false,
                    drawBorder: false,
                  }
                }],
                yAxes: [{
                  ticks: {
                    display: false,
                  },
                  gridLines: {
                    display: false,
                    drawBorder: false,
                  }
                }]
              }
            }
          });
        })
        .catch(function(v) {
          alert("Chart will not display if expense empty");
        });

      $("#deleteExpBtn").on('click', function(){
        $("#recordDetail").toggle('slide', {direction: "right"}, 100);

        //update current amount of bank of cash
        var recordDltAcc = $("#recordDetailAcc").text();
        var updateAcc = "current" + recordDltAcc + "Amt";
        if (recordDltAcc == "Bank") {
            var currentBankObj = {};
            var currentBankAmtRef = firebase.database().ref('currentBankAmt');
            currentBankAmtRef.on('value', function(snapshot){
                var childData = snapshot.val();
                currentBankObj.currentBank = parseFloat(childData.currentBank);
            });
            var currentBankAmt = parseFloat(currentBankObj.currentBank);
            var currentRecordAmt = $("#recordDetailAmt").text().substr(2);
            currentBankAmt += parseFloat(currentRecordAmt);

            //upload the current amount to firebase db
            currentBankObj.currentBank = currentBankAmt;
            firebase.database().ref().child('currentBankAmt').update(currentBankObj);
        }
        else {
            var currentCashObj = {};
            var currentCashAmtRef = firebase.database().ref('currentCashAmt');
            currentCashAmtRef.on('value', function(snapshot){
                var childData = snapshot.val();
                currentCashObj.currentCash = parseFloat(childData.currentCash);
            });
            var currentCashAmt = parseFloat(currentCashObj.currentCash);
            var currentRecordAmt = $("#recordDetailAmt").text().substr(2);
            currentCashAmt += parseFloat(currentRecordAmt);

            //upload the current amount to firebase db
            currentCashObj.currentCash = currentCashAmt;
            firebase.database().ref().child('currentCashAmt').update(currentCashObj);
        }
        
        var deleteKey = $("#recordDetailKey").text();
        //delete category obj records
        var deleteCat = $("#recordDetailCat").text();
        var deleteCatRef = firebase.database().ref('expenseCat').child(deleteCat);
        deleteCatRef.child(deleteKey).remove();
        //delete obj records
        var deleteRef = firebase.database().ref('expenseObj');
        deleteRef.child(deleteKey).remove();

        //Update the total amount of expense from database at navigation item
        var totalExpenseRef = firebase.database().ref('expenseObj');
        var totalExpenseObj;
        var totalExpense = 0;
        var currentSelectedMonth = document.getElementById("monthPicker").value;
        totalExpenseRef.on('value', function(snapshot){
          snapshot.forEach(function(childSnapshot){
            totalExpenseObj = childSnapshot.val();
            //compare month of record with current selected month
            var firebaseMonth = totalExpenseObj.expenseDate.substr(0, 2);
            var firebaseYear = totalExpenseObj.expenseDate.substr(-4);
            var validMonth = currentSelectedMonth.substr(-2);
            var validYear = currentSelectedMonth.substr(0, 4);
            if (firebaseMonth == validMonth && firebaseYear == validYear) {
              var expAmt = parseFloat(totalExpenseObj.expenseAmount);
              totalExpense += expAmt;
            }
          });
          document.getElementById("totalExpense").innerHTML = "RM" + totalExpense.toFixed(2);
        });

        //update total amount for categories and assign to chart
        var entTotal = 0;
        var foodTotal = 0;
        var vehTotal = 0;
        function delay() {
          var totalAmt = [];
          // `delay` returns a promise
          return new Promise(function(resolve, reject) {
            // Only `delay` is able to resolve or reject the promise
            var entRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var entObj;
            entRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                entObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = entObj.expenseDate.substr(0, 2);
                var firebaseYear = entObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var entAmt = parseFloat(entObj.expenseAmount);
                  entTotal += entAmt;
                }
              });
              totalAmt.push(entTotal);
            });
            var foodRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var foodObj;
            foodRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                foodObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = foodObj.expenseDate.substr(0, 2);
                var firebaseYear = foodObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var foodAmt = parseFloat(foodObj.expenseAmount);
                  foodTotal += foodAmt;
                }
              });
              totalAmt.push(foodTotal);
            });
            var vehRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var vehObj;
            vehRef.once("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                vehObj = childSnapshot.val();
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = vehObj.expenseDate.substr(0, 2);
                var firebaseYear = vehObj.expenseDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  var vehAmt = parseFloat(vehObj.expenseAmount);
                  vehTotal += vehAmt;
                }
              });
              totalAmt.push(vehTotal);
              resolve(totalAmt);
            }); 
          });
        }

        delay()
          .then(function(v) { // `delay` returns a promise, 'v' is an array contain both bankTotal and cashTotal
            //remove existing chart before update
            $("#myChart").remove();
            $(".chart").append('<canvas id="myChart"></canvas>');

            //integrate chart.js
            var ctx = $("#myChart");
            var myChart = new Chart(ctx, {
              type: 'doughnut',
              data: {
                labels: ["Entertainment", "Foods and Drinks", "Vehicle"],
                datasets: [{
                  label: '# of Votes',
                  data: [entTotal, foodTotal, vehTotal],
                  backgroundColor: [
                    'rgba(0, 0, 139, 0.2)',
                    'rgba(178, 34, 34, 0.2)',
                    'rgba(255, 255, 0, 0.2)'
                  ],
                  borderColor: [
                    'rgba(0, 0, 139, 1)',
                    'rgba(178, 34, 34, 1)',
                    'rgba(255, 255, 0, 1)'
                  ],
                  borderWidth: 1
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                tooltips: {
                  callbacks: {
                    title: function(tooltipItem, data) {
                      return data['labels'][tooltipItem[0]['index']];
                    },
                    label: function(tooltipItem, data) {
                      return "RM" + (data['datasets'][0]['data'][tooltipItem['index']]).toFixed(2);
                    },
                  }
                },
                elements: {
                  center: {
                    text: "RM" + parseFloat(entTotal + foodTotal + vehTotal).toFixed(2),
                    color: '#36A2EB', //Default black
                    fontStyle: 'Helvetica', //Default Arial
                    sidePadding: 15 //Default 20 (as a percentage)
                  }
                },
                scales: {
                  xAxes: [{
                    ticks: {
                      display: false,
                    },
                    gridLines: {
                      display: false,
                      drawBorder: false,
                    }
                  }],
                  yAxes: [{
                    ticks: {
                      display: false,
                  },  
                    gridLines: {
                      display: false,
                      drawBorder: false,
                    }
                  }]
                }
              }
            });
          })
          .catch(function(v) {
            alert("Chart will not display if expense empty");
          }); 

        //output list of data when loading the page and only appear if there are available data
        $("#expenseList li").remove();
        //check filter before list out records
        var bankChecked = $("#bankFilter").attr('checked');
        var cashChecked = $("#cashFilter").attr('checked');

        if ($("#sumByDate").hasClass('active')) {
          /*default list*/
          if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Only categories been selected*/
          //Entertainment & Food
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Entertainment & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }                 
          //Food & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
          $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //only Entertainment
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //only Foods
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //only Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                  //fetch day of date for position in array
                  var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                  //check if no empty array and records with same date, add into array and then object
                  if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                    dayArray = [];
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayArray.push(expenseObj);
                    cardObj[position] = dayArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Bank and categories selected*/
          //Bank + Entertainment & Food
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                  if (expAcc == "Bank") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Entertainment & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Food & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Entertainment
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Foods
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Bank + Vehicle
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Cash and categories selected*/
          //Cash + Entertainment & Food
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Foods and Drinks")) {
                  if (expAcc == "Cash") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Entertainment & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Entertainment" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Food & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && (expCat == "Foods and Drinks" || expCat == "Vehicle")) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Entertainment
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Entertainment") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Foods
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Foods and Drinks") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          //Cash + Vehicle
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if ((firebaseMonth == validMonth && firebaseYear == validYear) && expCat == "Vehicle") {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }
          /*Only account or categories been selected*/
          //only Bank
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });    
          }
          //only Cash
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseObj').orderByChild('expenseDate');
            var expenseObj;
            var cardObj = {};
            var dayArray = [];
            //index for each card item
            var i = 1;
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expDayinWeek = moment(expDate).format('ddd');
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch day of date for position in array
                    var position = expDayinWeek.concat(", " + moment(expDate).format("MMM DD"));
                    //check if no empty array and records with same date, add into array and then object
                    if (dayArray.length != 0 && dayArray[0].expenseDate != expenseObj.expenseDate) {
                      dayArray = [];
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayArray.push(expenseObj);
                      cardObj[position] = dayArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardObj) {
                if (cardObj.hasOwnProperty(key)) {
                  var cardHeaderDate = key;
                  var recordList = cardObj[key];
                  var cardText = '';
                  var x; //counter
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordAcc">' + recordList[x].expenseAccount + '</p>' + 
                                    '<p class="recordCat">' + recordList[x].expenseCategory + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordDate">' + cardHeaderDate + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse show" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                  i += 1;
                }
              }
            });
          }        
        }
        else {
          /*default list*/
          if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Only categories been selected*/
          //Entertainment & Food
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];            
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Entertainment & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Food & Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Entertainment
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayEntArray = [];
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayEntArray.push(expenseObj);
                    cardEntObj[position] = dayEntArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Foods
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayFoodArray = [];
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayFoodArray.push(expenseObj);
                    cardFoodObj[position] = dayFoodArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Vehicle
          else if ((bankChecked != "checked" && cashChecked != "checked") && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (firebaseMonth == validMonth && firebaseYear == validYear) {
                  //fetch category for position in array
                  var position = expCat;
                  //check if no empty array and records with same date, add into array and then object
                  if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                    dayVehArray = [];
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                  //initialise and add to card object if any single records in one day
                  else {
                    dayVehArray.push(expenseObj);
                    cardVehObj[position] = dayVehArray;
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Bank and categories selected*/
          //Bank + Entertainment & Food
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
  
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];          
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Entertainment & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Food & Vehicle
          else if (bankChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Entertainment
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Foods
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Bank + Vehicle
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Cash and categories selected*/
          //Cash + Entertainment & Food
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Foods and Drinks')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Entertainment & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Entertainment')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Food & Vehicle
          else if (cashChecked == "checked" && ($("#filter-condition").is(":contains('Foods and Drinks')") && $("#filter-condition").is(":contains('Vehicle')"))) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Entertainment
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Entertainment')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Foods
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Foods and Drinks')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //Cash + Vehicle
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Vehicle')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          /*Only account or categories been selected*/
          //only Bank
          else if (bankChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Bank") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }
          //only Cash
          else if (cashChecked == "checked" && $("#filter-condition").is(":contains('Filter')")) {
            $('#expenseList li').remove();
            var expenseRef = firebase.database().ref('expenseCat/Entertainment').orderByChild('expenseDate');
            var expenseObj;
            var cardEntObj = {};
            var dayEntArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayEntArray.length != 0 && dayEntArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayEntArray = [];
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayEntArray.push(expenseObj);
                      cardEntObj[position] = dayEntArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardEntObj) {
                if (cardEntObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardEntObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 1;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Foods and Drinks').orderByChild('expenseDate');
            var expenseObj;
            var cardFoodObj = {};
            var dayFoodArray = [];        
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayFoodArray.length != 0 && dayFoodArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayFoodArray = [];
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayFoodArray.push(expenseObj);
                      cardFoodObj[position] = dayFoodArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardFoodObj) {
                if (cardFoodObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardFoodObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 2;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
            var expenseRef = firebase.database().ref('expenseCat/Vehicle').orderByChild('expenseDate');
            var expenseObj;
            var cardVehObj = {};
            var dayVehArray = [];
            expenseRef.on("value", function(snapshot) {
              snapshot.forEach(function(childSnapshot){
                expenseObj = childSnapshot.val();
                var expDate = expenseObj.expenseDate;
                var expAcc = expenseObj.expenseAccount;
                var expCat = expenseObj.expenseCategory;
                var expAmt = parseFloat(expenseObj.expenseAmount);
                var currentSelectedMonth = document.getElementById("monthPicker").value;
                //compare month of record with current selected month
                var firebaseMonth = expDate.substr(0, 2);
                var firebaseYear = expDate.substr(-4);
                var validMonth = currentSelectedMonth.substr(-2);
                var validYear = currentSelectedMonth.substr(0, 4);
                if (expAcc == "Cash") {
                  if (firebaseMonth == validMonth && firebaseYear == validYear) {
                    //fetch category for position in array
                    var position = expCat;
                    //check if no empty array and records with same date, add into array and then object
                    if (dayVehArray.length != 0 && dayVehArray[0].expenseCategory != expenseObj.expenseCategory) {
                      dayVehArray = [];
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                    //initialise and add to card object if any single records in one day
                    else {
                      dayVehArray.push(expenseObj);
                      cardVehObj[position] = dayVehArray;
                    }
                  }
                }
              });
              //print out object for card items
              for (var key in cardVehObj) {
                if (cardVehObj.hasOwnProperty(key)) {
                  var cardHeaderCat = key;
                  var recordList = cardVehObj[key];
                  var cardText = '';
                  var x; //counter
                  //index for each card item
                  var i = 3;
  
                  var dailyTotalHeader = 0;
                  for (x = 0; x < recordList.length; x++){
                    var cardTextAmt = parseFloat(recordList[x].expenseAmount);
                    dailyTotalHeader += cardTextAmt;
                    cardText += '<a href="#" class="d-block mb-2 records">' +
                                  '<div class="d-flex justify-content-between">' + 
                                    '<span><p class="recordDate">' + recordList[x].expenseDate + '</p>' + 
                                    '<p class="recordAcc">' + recordList[x].expenseAccount + '</p></span>' + 
                                    '<span class="recordAmt">RM' + cardTextAmt.toFixed(2) + '</span>' + 
                                    '<p class="recordKey" style="display: none">' + recordList[x].key + '</p>' +       
                                  '</div>' +
                                '</a>';
                  }
  
                  $('#expenseList').append(
                  '<li class="list-group-item nopadding">' + 
                    '<div class="card">' + 
                      '<div class="card-header">' + 
                        '<a data-toggle="collapse" href="#collapse-item' + i + '" aria-expanded="true" aria-controls="collapse-item" id="heading-item' + i + '" class="d-block" style="text-decoration: none;color: black;">' + 
                          '<b class="recordCat">' + cardHeaderCat + '</b>' + 
                          '<span class="float-right">RM' + (dailyTotalHeader).toFixed(2) + '</span>' +
                        '</a>' + 
                      '</div>' + 
                      '<div id="collapse-item' + i + '" class="collapse" aria-labelledby="heading-item' + i + '">' + 
                        '<div class="card-body">' + 
                          cardText +
                        '</div>' +
                      '</div>' + 
                    '</div>' +
                  '</li>');
                }
              }
            });
          }        
        }
      });
    </script>
  </body>
</html>